!function($){var e=window.SelectBox=function(e,t){if(e instanceof jQuery){if(!(e.length>0))return;e=e[0]}return this.typeTimer=null,this.typeSearch="",this.isMac=navigator.platform.match(/mac/i),t="object"==typeof t?t:{},this.selectElement=e,!t.mobile&&navigator.userAgent.match(/iPad|iPhone|Android|IEMobile|BlackBerry/i)?!1:"select"!==e.tagName.toLowerCase()?!1:void this.init(t)};e.prototype.version="1.2.0",e.prototype.init=function(e){var t=$(this.selectElement);if(t.data("selectBox-control"))return!1;var s=$('<a class="selectBox" />'),o=t.attr("multiple")||parseInt(t.attr("size"))>1,a=e||{},n=parseInt(t.prop("tabindex"))||0,l=this;if(s.width(t.outerWidth()).addClass(t.attr("class")).attr("title",t.attr("title")||"").attr("tabindex",n).css("display","inline-block").bind("focus.selectBox",function(){this!==document.activeElement&&document.body!==document.activeElement&&$(document.activeElement).blur(),s.hasClass("selectBox-active")||(s.addClass("selectBox-active"),t.trigger("focus"))}).bind("blur.selectBox",function(){s.hasClass("selectBox-active")&&(s.removeClass("selectBox-active"),t.trigger("blur"))}),$(window).data("selectBox-bindings")||$(window).data("selectBox-bindings",!0).bind("scroll.selectBox",a.hideOnWindowScroll?this.hideMenus:$.noop).bind("resize.selectBox",this.hideMenus),t.attr("disabled")&&s.addClass("selectBox-disabled"),t.bind("click.selectBox",function(e){s.focus(),e.preventDefault()}),o){if(e=this.getOptions("inline"),s.append(e).data("selectBox-options",e).addClass("selectBox-inline selectBox-menuShowing").bind("keydown.selectBox",function(e){l.handleKeyDown(e)}).bind("keypress.selectBox",function(e){l.handleKeyPress(e)}).bind("mousedown.selectBox",function(e){1===e.which&&($(e.target).is("A.selectBox-inline")&&e.preventDefault(),s.hasClass("selectBox-focus")||s.focus())}).insertAfter(t),!t[0].style.height){var i=t.attr("size")?parseInt(t.attr("size")):5,c=s.clone().removeAttr("id").css({position:"absolute",top:"-9999em"}).show().appendTo("body");c.find(".selectBox-options").html("<li><a> </a></li>");var r=parseInt(c.find(".selectBox-options A:first").html("&nbsp;").outerHeight());c.remove(),s.height(r*i)}this.disableSelection(s)}else{var d=$('<span class="selectBox-label" />'),h=$('<span class="selectBox-arrow" />');d.attr("class",this.getLabelClass()).html(this.getLabelHtml()),e=this.getOptions("dropdown"),e.appendTo("BODY"),s.data("selectBox-options",e).addClass("selectBox-dropdown").append(d).append(h).bind("mousedown.selectBox",function(t){1===t.which&&(s.hasClass("selectBox-menuShowing")?l.hideMenus():(t.stopPropagation(),e.data("selectBox-down-at-x",t.screenX).data("selectBox-down-at-y",t.screenY),l.showMenu()))}).bind("keydown.selectBox",function(e){l.handleKeyDown(e)}).bind("keypress.selectBox",function(e){l.handleKeyPress(e)}).bind("open.selectBox",function(e,t){t&&t._selectBox===!0||l.showMenu()}).bind("close.selectBox",function(e,t){t&&t._selectBox===!0||l.hideMenus()}).insertAfter(t);var p=s.width()-h.outerWidth()-(parseInt(d.css("paddingLeft"))||0)-(parseInt(d.css("paddingRight"))||0);d.width(p),this.disableSelection(s)}t.addClass("selectBox").data("selectBox-control",s).data("selectBox-settings",a).hide()},e.prototype.getOptions=function(e){var t,s=$(this.selectElement),o=this,a=function(e,t){return e.children("OPTION, OPTGROUP").each(function(){if($(this).is("OPTION"))$(this).length>0?o.generateOptions($(this),t):t.append("<li> </li>");else{var e=$('<li class="selectBox-optgroup" />');e.text($(this).attr("label")),t.append(e),t=a($(this),t)}}),t};switch(e){case"inline":return t=$('<ul class="selectBox-options" />'),t=a(s,t),t.find("A").bind("mouseover.selectBox",function(e){o.addHover($(this).parent())}).bind("mouseout.selectBox",function(e){o.removeHover($(this).parent())}).bind("mousedown.selectBox",function(e){1===e.which&&(e.preventDefault(),s.selectBox("control").hasClass("selectBox-active")||s.selectBox("control").focus())}).bind("mouseup.selectBox",function(e){1===e.which&&(o.hideMenus(),o.selectOption($(this).parent(),e))}),this.disableSelection(t),t;case"dropdown":t=$('<ul class="selectBox-dropdown-menu selectBox-options" />'),t=a(s,t),t.data("selectBox-select",s).css("display","none").appendTo("BODY").find("A").bind("mousedown.selectBox",function(e){1===e.which&&(e.preventDefault(),e.screenX===t.data("selectBox-down-at-x")&&e.screenY===t.data("selectBox-down-at-y")&&(t.removeData("selectBox-down-at-x").removeData("selectBox-down-at-y"),/android/i.test(navigator.userAgent.toLowerCase())&&/chrome/i.test(navigator.userAgent.toLowerCase())&&o.selectOption($(this).parent()),o.hideMenus()))}).bind("mouseup.selectBox",function(e){1===e.which&&(e.screenX===t.data("selectBox-down-at-x")&&e.screenY===t.data("selectBox-down-at-y")||(t.removeData("selectBox-down-at-x").removeData("selectBox-down-at-y"),o.selectOption($(this).parent()),o.hideMenus()))}).bind("mouseover.selectBox",function(e){o.addHover($(this).parent())}).bind("mouseout.selectBox",function(e){o.removeHover($(this).parent())});var n=s.attr("class")||"";if(""!==n){n=n.split(" ");for(var l=0;l<n.length;l++)t.addClass(n[l]+"-selectBox-dropdown-menu")}return this.disableSelection(t),t}},e.prototype.getLabelClass=function(){var e=$(this.selectElement).find("OPTION:selected");return("selectBox-label "+(e.attr("class")||"")).replace(/\s+$/,"")},e.prototype.getLabelHtml=function(){var e=$(this.selectElement).find("OPTION:selected"),t;return t=e.data("icon")?'<i class="fa fa-'+e.data("icon")+' fa-fw fa-lg"></i> '+e.text():e.text(),t||" "},e.prototype.setLabel=function(){var e=$(this.selectElement),t=e.data("selectBox-control");t&&t.find(".selectBox-label").attr("class",this.getLabelClass()).html(this.getLabelHtml())},e.prototype.destroy=function(){var e=$(this.selectElement),t=e.data("selectBox-control");if(t){var s=t.data("selectBox-options");s.remove(),t.remove(),e.removeClass("selectBox").removeData("selectBox-control").data("selectBox-control",null).removeData("selectBox-settings").data("selectBox-settings",null).show()}},e.prototype.refresh=function(){var e=$(this.selectElement),t=e.data("selectBox-control"),s=t.hasClass("selectBox-dropdown")?"dropdown":"inline",o;switch(t.data("selectBox-options").remove(),o=this.getOptions(s),t.data("selectBox-options",o),s){case"inline":t.append(o);break;case"dropdown":this.setLabel(),$("BODY").append(o)}"dropdown"===s&&t.hasClass("selectBox-menuShowing")&&this.showMenu()},e.prototype.showMenu=function(){var e=this,t=$(this.selectElement),s=t.data("selectBox-control"),o=t.data("selectBox-settings"),a=s.data("selectBox-options");if(s.hasClass("selectBox-disabled"))return!1;this.hideMenus();var n=parseInt(s.css("borderBottomWidth"))||0,l=parseInt(s.css("borderTopWidth"))||0,i=s.offset(),c=o.topPositionCorrelation?o.topPositionCorrelation:0,r=o.bottomPositionCorrelation?o.bottomPositionCorrelation:0,d=a.outerHeight(),h=s.outerHeight(),p=parseInt(a.css("max-height")),x=$(window).scrollTop(),u=i.top-x,f=$(window).height()-(u+h),B=u>f&&(null==o.keepInViewport?!0:o.keepInViewport),v=s.innerWidth()>=a.innerWidth()?s.innerWidth()+"px":"auto",m=B?i.top-d+l+c:i.top+h-n-r;if(p>u&&p>f)if(B){var g=p-(u-5);a.css({"max-height":p-g+"px"}),m+=g}else{var g=p-(f-5);a.css({"max-height":p-g+"px"})}if(a.data("posTop",B),a.width(v).css({top:m,left:s.offset().left}).addClass("selectBox-options selectBox-options-"+(B?"top":"bottom")),o.styleClass&&a.addClass(o.styleClass),t.triggerHandler("beforeopen"))return!1;var b=function(){t.triggerHandler("open",{_selectBox:!0})};switch(o.menuTransition){case"fade":a.fadeIn(o.menuSpeed,b);break;case"slide":a.slideDown(o.menuSpeed,b);break;default:a.show(o.menuSpeed,b)}o.menuSpeed||b();var w=a.find(".selectBox-selected:first");this.keepOptionInView(w,!0),this.addHover(w),s.addClass("selectBox-menuShowing selectBox-menuShowing-"+(B?"top":"bottom")),$(document).bind("mousedown.selectBox",function(t){if(1===t.which){if($(t.target).parents().andSelf().hasClass("selectBox-options"))return;e.hideMenus()}})},e.prototype.hideMenus=function(){0!==$(".selectBox-dropdown-menu:visible").length&&($(document).unbind("mousedown.selectBox"),$(".selectBox-dropdown-menu").each(function(){var e=$(this),t=e.data("selectBox-select"),s=t.data("selectBox-control"),o=t.data("selectBox-settings"),a=e.data("posTop");if(t.triggerHandler("beforeclose"))return!1;var n=function(){t.triggerHandler("close",{_selectBox:!0})};if(o){switch(o.menuTransition){case"fade":e.fadeOut(o.menuSpeed,n);break;case"slide":e.slideUp(o.menuSpeed,n);break;default:e.hide(o.menuSpeed,n)}o.menuSpeed||n(),s.removeClass("selectBox-menuShowing selectBox-menuShowing-"+(a?"top":"bottom"))}else $(this).hide(),$(this).triggerHandler("close",{_selectBox:!0}),$(this).removeClass("selectBox-menuShowing selectBox-menuShowing-"+(a?"top":"bottom"));e.css("max-height",""),e.removeClass("selectBox-options-"+(a?"top":"bottom")),e.data("posTop",!1)}))},e.prototype.selectOption=function(e,t){var s=$(this.selectElement);e=$(e);var o=s.data("selectBox-control"),a=s.data("selectBox-settings");if(o.hasClass("selectBox-disabled"))return!1;if(0===e.length||e.hasClass("selectBox-disabled"))return!1;if(s.attr("multiple"))if(t.shiftKey&&o.data("selectBox-last-selected")){e.toggleClass("selectBox-selected");var n;n=e.index()>o.data("selectBox-last-selected").index()?e.siblings().slice(o.data("selectBox-last-selected").index(),e.index()):e.siblings().slice(e.index(),o.data("selectBox-last-selected").index()),n=n.not(".selectBox-optgroup, .selectBox-disabled"),e.hasClass("selectBox-selected")?n.addClass("selectBox-selected"):n.removeClass("selectBox-selected")}else this.isMac&&t.metaKey||!this.isMac&&t.ctrlKey?e.toggleClass("selectBox-selected"):(e.siblings().removeClass("selectBox-selected"),e.addClass("selectBox-selected"));else e.siblings().removeClass("selectBox-selected"),e.addClass("selectBox-selected");o.hasClass("selectBox-dropdown")&&o.find(".selectBox-label").html(e.html());var l=0,i=[];return s.attr("multiple")?o.find(".selectBox-selected A").each(function(){i[l++]=$(this).attr("rel")}):i=e.find("A").attr("rel"),o.data("selectBox-last-selected",e),s.val()!==i&&(s.val(i),this.setLabel(),s.trigger("change")),!0},e.prototype.addHover=function(e){e=$(e);var t=$(this.selectElement),s=t.data("selectBox-control"),o=s.data("selectBox-options");o.find(".selectBox-hover").removeClass("selectBox-hover"),e.addClass("selectBox-hover")},e.prototype.getSelectElement=function(){return this.selectElement},e.prototype.removeHover=function(e){e=$(e);var t=$(this.selectElement),s=t.data("selectBox-control"),o=s.data("selectBox-options");o.find(".selectBox-hover").removeClass("selectBox-hover")},e.prototype.keepOptionInView=function(e,t){if(e&&0!==e.length){var s=$(this.selectElement),o=s.data("selectBox-control"),a=o.data("selectBox-options"),n=o.hasClass("selectBox-dropdown")?a:a.parent(),l=parseInt(e.offset().top-n.position().top),i=parseInt(l+e.outerHeight());t?n.scrollTop(e.offset().top-n.offset().top+n.scrollTop()-n.height()/2):(0>l&&n.scrollTop(e.offset().top-n.offset().top+n.scrollTop()),i>n.height()&&n.scrollTop(e.offset().top+e.outerHeight()-n.offset().top+n.scrollTop()-n.height()))}},e.prototype.handleKeyDown=function(e){var t=$(this.selectElement),s=t.data("selectBox-control"),o=s.data("selectBox-options"),a=t.data("selectBox-settings"),n=0,l=0;if(!s.hasClass("selectBox-disabled"))switch(e.keyCode){case 8:e.preventDefault(),this.typeSearch="";break;case 9:case 27:this.hideMenus(),this.removeHover();break;case 13:s.hasClass("selectBox-menuShowing")?(this.selectOption(o.find("LI.selectBox-hover:first"),e),s.hasClass("selectBox-dropdown")&&this.hideMenus()):this.showMenu();break;case 38:case 37:if(e.preventDefault(),s.hasClass("selectBox-menuShowing")){var i=o.find(".selectBox-hover").prev("LI");for(n=o.find("LI:not(.selectBox-optgroup)").length,l=0;(0===i.length||i.hasClass("selectBox-disabled")||i.hasClass("selectBox-optgroup"))&&(i=i.prev("LI"),0===i.length&&(i=a.loopOptions?o.find("LI:last"):o.find("LI:first")),!(++l>=n)););this.addHover(i),this.selectOption(i,e),this.keepOptionInView(i)}else this.showMenu();break;case 40:case 39:if(e.preventDefault(),s.hasClass("selectBox-menuShowing")){var c=o.find(".selectBox-hover").next("LI");for(n=o.find("LI:not(.selectBox-optgroup)").length,l=0;(0===c.length||c.hasClass("selectBox-disabled")||c.hasClass("selectBox-optgroup"))&&(c=c.next("LI"),0===c.length&&(c=a.loopOptions?o.find("LI:first"):o.find("LI:last")),!(++l>=n)););this.addHover(c),this.selectOption(c,e),this.keepOptionInView(c)}else this.showMenu()}},e.prototype.handleKeyPress=function(e){var t=$(this.selectElement),s=t.data("selectBox-control"),o=s.data("selectBox-options"),a=this;if(!s.hasClass("selectBox-disabled"))switch(e.keyCode){case 9:case 27:case 13:case 38:case 37:case 40:case 39:break;default:s.hasClass("selectBox-menuShowing")||this.showMenu(),e.preventDefault(),clearTimeout(this.typeTimer),this.typeSearch+=String.fromCharCode(e.charCode||e.keyCode),o.find("A").each(function(){return $(this).text().substr(0,a.typeSearch.length).toLowerCase()===a.typeSearch.toLowerCase()?(a.addHover($(this).parent()),a.selectOption($(this).parent(),e),a.keepOptionInView($(this).parent()),!1):void 0}),this.typeTimer=setTimeout(function(){a.typeSearch=""},1e3)}},e.prototype.enable=function(){var e=$(this.selectElement);e.prop("disabled",!1);var t=e.data("selectBox-control");t&&t.removeClass("selectBox-disabled")},e.prototype.disable=function(){var e=$(this.selectElement);e.prop("disabled",!0);var t=e.data("selectBox-control");t&&t.addClass("selectBox-disabled")},e.prototype.setValue=function(e){var t=$(this.selectElement);t.val(e),e=t.val(),null===e&&(e=t.children().first().val(),t.val(e));var s=t.data("selectBox-control");if(s){var o=t.data("selectBox-settings"),a=s.data("selectBox-options");this.setLabel(),a.find(".selectBox-selected").removeClass("selectBox-selected"),a.find("A").each(function(){if("object"==typeof e)for(var t=0;t<e.length;t++)$(this).attr("rel")==e[t]&&$(this).parent().addClass("selectBox-selected");else $(this).attr("rel")==e&&$(this).parent().addClass("selectBox-selected")}),o.change&&o.change.call(t)}},e.prototype.disableSelection=function(e){$(e).css("MozUserSelect","none").bind("selectstart",function(e){e.preventDefault()})},e.prototype.generateOptions=function(e,t){var s=$("<li />"),o=$("<a />");s.addClass(e.attr("class")),s.data(e.data()),e.data("icon")?o.attr("rel",e.val()).html('<i class="fa fa-'+e.data("icon")+' fa-fw fa-lg"></i> '+e.text()):o.attr("rel",e.val()).text(e.text()),s.append(o),e.attr("disabled")&&s.addClass("selectBox-disabled"),e.attr("selected")&&s.addClass("selectBox-selected"),t.append(s)},$.extend($.fn,{setOptions:function(e){var t=$(this),s=t.data("selectBox-control");switch(typeof e){case"string":t.html(e);break;case"object":t.html("");for(var o in e)if(null!==e[o])if("object"==typeof e[o]){var a=$('<optgroup label="'+o+'" />');for(var n in e[o])a.append('<option value="'+n+'">'+e[o][n]+"</option>");t.append(a)}else{var l=$('<option value="'+o+'">'+e[o]+"</option>");t.append(l)}}s&&$(this).selectBox("refresh")},selectBox:function(t,s){var o;switch(t){case"control":return $(this).data("selectBox-control");case"settings":if(!s)return $(this).data("selectBox-settings");$(this).each(function(){$(this).data("selectBox-settings",$.extend(!0,$(this).data("selectBox-settings"),s))});break;case"options":if(void 0===s)return $(this).data("selectBox-control").data("selectBox-options");$(this).each(function(){$(this).setOptions(s)});break;case"value":if(void 0===s)return $(this).val();$(this).each(function(){(o=$(this).data("selectBox"))&&o.setValue(s)});break;case"refresh":$(this).each(function(){(o=$(this).data("selectBox"))&&o.refresh()});break;case"enable":$(this).each(function(){(o=$(this).data("selectBox"))&&o.enable(this)});break;case"disable":$(this).each(function(){(o=$(this).data("selectBox"))&&o.disable()});break;case"destroy":$(this).each(function(){(o=$(this).data("selectBox"))&&(o.destroy(),$(this).data("selectBox",null))});break;case"instance":return $(this).data("selectBox");default:$(this).each(function(s,o){$(o).data("selectBox")||$(o).data("selectBox",new e(o,t))})}return $(this)}})}(jQuery);